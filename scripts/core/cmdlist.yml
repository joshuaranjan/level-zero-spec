--- #--------------------------------------------------------------------------
type: header
desc: "Intel $Xx Driver APIs for Command List"
--- #--------------------------------------------------------------------------
type: macro
desc: "API version of $x_command_list_desc_t"
name: $X_COMMAND_LIST_DESC_VERSION
value: "$X_MAKE_VERSION( 1, 0 )"
--- #--------------------------------------------------------------------------
type: enum
desc: "Supported command list creation flags"
name: $x_command_list_flags_t
etors:
    - name: $X_COMMAND_LIST_FLAG_NONE
      value: "0"
      desc: "default behavior"
    - name: $X_COMMAND_LIST_FLAG_COPY_ONLY
      value: "$X_BIT(0)"
      desc: "command list **only** contains copy operations (and synchronization primitives)"
    - name: $X_COMMAND_LIST_FLAG_RELAXED_ORDERING
      value: "$X_BIT(1)"
      desc: "driver may reorder programs and copys between barriers and synchronization primitives"
    - name: $X_COMMAND_LIST_FLAG_LOW_LATENCY
      value: "$X_BIT(2)"
      desc: "driver should optimize for immediate submission to a command queue"
    - name: $X_COMMAND_LIST_FLAG_CROSS_DEVICE
      value: "$X_BIT(3)"
      desc: "command list can be shared with another device"
--- #--------------------------------------------------------------------------
type: struct
desc: "Command List descriptor"
name: $x_command_list_desc_t
members:
    - type: uint32_t
      name: version
      desc: "[in] $X_COMMAND_LIST_DESC_VERSION"
    - type: $x_command_list_flags_t
      name: flags
      desc: "[in] creation flags"
--- #--------------------------------------------------------------------------
type: function
desc: "Creates a command list on the device for submitting commands to any command queue."
name: $xDeviceCreateCommandList
details:
    - "The command list is created in the 'open' state."
    - "This function may be called from simultaneous threads."
    - "The implementation of this function should be lock-free."
params:
    - type: $x_device_handle_t
      name: hDevice
      desc: "[in] handle of the device object"
    - type: "const $x_command_list_desc_t*"
      name: desc
      desc: "[in] pointer to command list descriptor"
    - type: $x_command_list_handle_t*
      name: phCommandList
      desc: "[out] pointer to handle of command list object created"
returns:
    - $X_RESULT_ERROR_INVALID_PARAMETER:
        - "invalid handle for hDevice"
        - "nullptr for desc"
        - "nullptr for phCommandList"
    - $X_RESULT_ERROR_OUT_OF_HOST_MEMORY
    - $X_RESULT_ERROR_OUT_OF_DEVICE_MEMORY
--- #--------------------------------------------------------------------------
type: function
desc: "Copies a command list on the device for submitting commands to any command queue."
name: $xDeviceCopyCommandList
details:
    - "The command list to be copied must be closed."
    - "The command list created will be in the 'open' state."
    - "If the device is a different than the one used to create the source command list,
      then it must have been created using the $X_COMMAND_LIST_FLAG_CROSS_DEVICE flag."
    - "This function may be called from simultaneous threads."
    - "The implementation of this function should be lock-free."
params:
    - type: $x_device_handle_t
      name: hDevice
      desc: "[in] handle of the device object"
    - type: $x_command_list_handle_t
      name: hCommandList
      desc: "[in] handle to command list to copy"
    - type: "$x_command_list_handle_t*"
      name: phCommandList
      desc: "[out] pointer to handle of command list object created"
returns:
    - $X_RESULT_ERROR_INVALID_PARAMETER:
        - "invalid handle for hDevice"
        - "invalid handle for hCommandList"
        - "nullptr for phCommandList"
    - $X_RESULT_ERROR_OUT_OF_HOST_MEMORY
    - $X_RESULT_ERROR_OUT_OF_DEVICE_MEMORY
--- #--------------------------------------------------------------------------
type: function
desc: "Destroys a command list."
name: $xCommandListDestroy
details:
    - "The application is responsible for making sure the GPU is not currently referencing the command list before it is deleted"
    - "The implementation of this function will immediately free all Host and Device allocations associated with this command list."
    - "The implementation of this function should be lock-free."
params:
    - type: $x_command_list_handle_t
      name: hCommandList
      desc: "[in] handle of command list object to destroy"
returns:
    - $X_RESULT_ERROR_INVALID_PARAMETER:
        - "invalid handle for hCommandList"
--- #--------------------------------------------------------------------------
type: function
desc: "Closes a command list; ready to be enqueued into a command queue."
name: $xCommandListClose
details:
    - "The application may **not** call this function from simultaneous threads with the same command list handle."
    - "The implementation of this function should be lock-free."
params:
    - type: $x_command_list_handle_t
      name: hCommandList
      desc: "[in] handle of command list object to close"
returns:
    - $X_RESULT_ERROR_INVALID_PARAMETER:
        - "invalid handle for hCommandList"
--- #--------------------------------------------------------------------------
type: function
desc: "Reset a command list to initial (empty) state; ready for encoding commands."
name: $xCommandListReset
details:
    - "The application is responsible for making sure the GPU is not currently referencing the command list before it is reset"
    - "The application may **not** call this function from simultaneous threads with the same command list handle."
    - "The implementation of this function should be lock-free."
params:
    - type: $x_command_list_handle_t
      name: hCommandList
      desc: "[in] handle of command list object to reset"
returns:
    - $X_RESULT_ERROR_INVALID_PARAMETER:
        - "invalid handle for hCommandList"
--- #--------------------------------------------------------------------------
type: enum
desc: "Supported command list parameters"
name: $x_command_list_parameter_t
etors:
    - name: $X_COMMAND_LIST_PARAMETER_TBD
      desc: "TBD"
--- #--------------------------------------------------------------------------
type: function
desc: "Sets a command list's parameter."
name: $xCommandListSetParameter
analogue:
    - cuCtxSetCacheConfig
    - cuCtxSetLimit
    - cuCtxSetSharedMemConfig
details:
    - "The application may **not** call this function from simultaneous threads with the same command list handle."
    - "The implementation of this function should be lock-free."
params:
    - type: $x_command_list_handle_t
      name: hCommandList
      desc: "[in] handle of command list"
    - type: $x_command_list_parameter_t
      name: parameter
      desc: "[in] parameter to change"
    - type: uint32_t
      name: value
      desc: "[in] value of attribute"
returns:
    - $X_RESULT_ERROR_INVALID_PARAMETER:
        - "invalid handle for hCommandList"
        - "invalid value for attribute"
        - "invalid value for value"
--- #--------------------------------------------------------------------------
type: function
desc: "Retrieves a command list's parameter."
name: $xCommandListGetParameter
analogue:
    - cuCtxGetCacheConfig
    - cuCtxGetLimit
    - cuCtxGetSharedMemConfig
    - cuCtxGetStreamPriorityRange
details:
    - "The application may **not** call this function from simultaneous threads with the same command list handle."
    - "The implementation of this function should be lock-free."
params:
    - type: $x_command_list_handle_t
      name: hCommandList
      desc: "[in] handle of command list"
    - type: $x_command_list_parameter_t
      name: parameter
      desc: "[in] parameter to retrieve"
    - type: "uint32_t*"
      name: value
      desc: "[out] value of attribute"
returns:
    - $X_RESULT_ERROR_INVALID_PARAMETER:
        - "invalid handle for hCommandList"
        - "invalid value for attribute"
        - "nullptr for value"
--- #--------------------------------------------------------------------------
type: function
desc: "Resets all command list parameters to default state."
name: $xCommandListResetParameters
details:
    - "The application may **not** call this function from simultaneous threads with the same command list handle."
    - "The implementation of this function should be lock-free."
params:
    - type: $x_command_list_handle_t
      name: hCommandList
      desc: "[in] handle of the command list"
returns:
    - $X_RESULT_ERROR_INVALID_PARAMETER:
       - "invalid handle for hCommandList"
--- #--------------------------------------------------------------------------
type: function
desc: "Encode a command list into another command list."
name: $xCommandListEncodeCommandLists
details:
    - "The application may **not** call this function from simultaneous threads with the same command list handle."
    - "The implementation of this function should be lock-free."
params:
    - type: $x_command_list_handle_t
      name: hCommandList
      desc: "[in] handle of the command list"
    - type: uint32_t
      name: numCommandLists
      desc: "[in] number of command lists to encode"
    - type: "$x_command_list_handle_t*"
      name: phCommandLists
      desc: "[in] list of handles of the command lists to encode for execution"
returns:
    - $X_RESULT_ERROR_INVALID_PARAMETER:
       - "invalid handle for hCommandList"
       - "0 for numCommandLists"
       - "nullptr for phCommandLists"
       - "invalid handle in phCommandLists"
