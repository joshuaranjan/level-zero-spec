--- #--------------------------------------------------------------------------
type: header
desc: "Intel $OneApi Level-Zero APIs for Device"
ordinal: "1"
--- #--------------------------------------------------------------------------
type: function
desc: "Reports the number of devices"
class: $xDevice
name: GetCount
decl: static
ordinal: "0"
analogue:
    - "**cuDeviceGetCount**"
details:
    - "The application may call this function from simultaneous threads."
    - "The implementation of this function should be lock-free."
params:
    - type: "uint32_t*"
      name: count
      desc: "[out] number of devices available"
--- #--------------------------------------------------------------------------
type: macro
desc: "Maximum device uuid size in bytes"
name: $X_MAX_UUID_SIZE
value: "16"
--- #--------------------------------------------------------------------------
type: struct
desc: "Device universal unique id (UUID)"
class: $xDevice
name: $x_device_uuid_t
members:
    - type: uint8_t
      name: "id[$X_MAX_UUID_SIZE]"
      desc: "[out] device universal unique id"
--- #--------------------------------------------------------------------------
type: function
desc: "Returns a handle to the device object"
class: $xDevice
name: Get
decl: static
ordinal: "0"
analogue:
    - "**cuDeviceGet**"
    - clGetDeviceIDs
details:
    - "The application may call this function from simultaneous threads."
    - "The implementation of this function should be lock-free."
params:
    - type: uint32_t
      name: ordinal
      desc: "[in] The device index in the range of [0, $xDeviceGetCount]"
    - type: "$x_device_handle_t*"
      name: phDevice
      desc: "[out] pointer to handle of device object created"
returns:
    - $X_RESULT_ERROR_INVALID_PARAMETER:
        - "ordinal is out of range reported by $xDeviceGetCount"
--- #--------------------------------------------------------------------------
type: function
desc: "Returns a handle to the sub-device object"
class: $xDevice
name: GetSubDevice
ordinal: "1"
analogue:
    - "**cuDeviceGet**"
    - clGetDeviceIDs
details:
    - "The application may call this function from simultaneous threads."
    - "The implementation of this function should be lock-free."
params:
    - type: $x_device_handle_t
      name: hDevice
      desc: "[in] handle of the device object"
    - type: uint32_t
      name: ordinal
      desc: "[in] ordinal of sub-device to retrieve"
    - type: "$x_device_handle_t*"
      name: phSubDevice
      desc: "[out] pointer to handle of sub-device object."
returns:
    - $X_RESULT_ERROR_INVALID_PARAMETER:
        - "ordinal is out of range reported by device properties."
--- #--------------------------------------------------------------------------
type: enum
desc: "Supported API versions"
class: $xDevice
name: $x_api_version_t
details:
    - "API versions contain major and minor attributes, use $X_MAJOR_VERSION and $X_MINOR_VERSION"
etors:
    - name: $X_API_VERSION_1_0
      value: "$X_MAKE_VERSION( 1, 0 )"
      desc: "1.0"
--- #--------------------------------------------------------------------------
type: function
desc: "Returns the API version supported by the device"
class: $xDevice
name: GetApiVersion
ordinal: "1"
analogue:
    - "**cuCtxGetApiVersion**"
details:
    - "The application may call this function from simultaneous threads."
    - "The implementation of this function should be lock-free."
params:
    - type: $x_device_handle_t
      name: hDevice
      desc: "[in] handle of the device object"
    - type: "$x_api_version_t*"
      name: version
      desc: "[out] api version"
--- #--------------------------------------------------------------------------
type: enum
desc: "API version of $x_device_properties_t"
class: $xDevice
name: $x_device_properties_version_t
etors:
    - name: $X_DEVICE_PROPERTIES_VERSION_CURRENT
      value: "$X_MAKE_VERSION( 1, 0 )"
      desc: "version 1.0"
--- #--------------------------------------------------------------------------
type: macro
desc: "Maximum device name string size"
name: $X_MAX_DEVICE_NAME
value: "256"
--- #--------------------------------------------------------------------------
type: struct
desc: "Device properties queried using $xDeviceGetProperties"
class: $xDevice
name: $x_device_properties_t
members:
    - type: $x_device_properties_version_t
      name: version
      desc: "[in] $X_DEVICE_PROPERTIES_VERSION_CURRENT"
      init: $X_DEVICE_PROPERTIES_VERSION_CURRENT
    - type: uint32_t
      name: vendorId
      desc: "[out] vendor id from PCI configuration"
    - type: uint32_t
      name: deviceId
      desc: "[out] device id from PCI configuration" 
    - type: uint32_t
      name: subdeviceId
      desc: "[out] Subdevice id. Only valid if isSubdevice is true."
    - type: $x_device_uuid_t
      name: uuid
      desc: "[out] unique id for device."
    - type: $x_bool_t
      name: isSubdevice
      desc: "[out] Is this a subdevice."
    - type: uint32_t
      name: numSubDevices
      desc: "[out] Number of sub-devices."
    - type: uint32_t
      name: coreClockRate
      desc: "[out] Clock rate for device core."
    - type: uint32_t
      name: memClockRate
      desc: "[out] Clock rate for device global memory"
    - type: uint32_t
      name: memGlobalBusWidth
      desc: "[out] Bus width between core and memory."
    - type: uint64_t
      name: totalLocalMemSize
      desc: "[out] Total memory size in bytes."
    - type: uint32_t
      name: maxCommandQueues
      desc: "[out] Maximum number of logical command queues."
    - type: uint32_t
      name: numAsyncComputeEngines
      desc: "[out] Number of asynchronous compute engines"
    - type: uint32_t
      name: numAsyncCopyEngines
      desc: "[out] Number of asynchronous copy engines"
    - type: uint32_t
      name: maxCommandQueuePriority
      desc: "[out] Maximum priority for command queues. Higher value is higher priority."
    - type: uint32_t
      name: numThreadsPerEU
      desc: "[out] Number of threads per EU."
    - type: uint32_t
      name: physicalEUSimdWidth
      desc: "[out] The physical EU simd width."
    - type: uint32_t
      name: numEUsPerSubslice
      desc: "[out] Number of EUs per sub-slice."
    - type: uint32_t
      name: numSubslicesPerSlice
      desc: "[out] Number of sub-slices per slice."
    - type: uint32_t
      name: numSlicesPerTile
      desc: "[out] Number of slices per tile."
    - type: uint32_t
      name: numTiles
      desc: "[out] Number of tiles for this device."
    - type: char
      name: "name[$X_MAX_DEVICE_NAME]"
      desc: "[out] Device name"
--- #--------------------------------------------------------------------------
type: function
desc: "Retrieves attributes of the device"
class: $xDevice
name: GetProperties
ordinal: "1"
analogue:
    - "**cuDeviceGetAttribute**"
    - cuDeviceGetName
    - clGetDeviceInfo
details:
    - "The application may call this function from simultaneous threads."
    - "The implementation of this function should be lock-free."
params:
    - type: $x_device_handle_t
      name: hDevice
      desc: "[in] handle of the device object"
    - type: "$x_device_properties_t*"
      name: pDeviceProperties
      desc: "[out] query result for device properties"
--- #--------------------------------------------------------------------------
type: enum
desc: "API version of $x_device_compute_properties_t"
class: $xDevice
name: $x_device_compute_properties_version_t
etors:
    - name: $X_DEVICE_COMPUTE_PROPERTIES_VERSION_CURRENT
      value: "$X_MAKE_VERSION( 1, 0 )"
      desc: "version 1.0"
--- #--------------------------------------------------------------------------
type: macro
desc: "Maximum number of subgroup sizes supported."
name: $X_SUBGROUPSIZE_COUNT
value: "8"
--- #--------------------------------------------------------------------------
type: struct
desc: "Device compute properties queried using $xDeviceGetComputeProperties"
class: $xDevice
name: $x_device_compute_properties_t
members:
    - type: $x_device_compute_properties_version_t
      name: version
      desc: "[in] $X_DEVICE_COMPUTE_PROPERTIES_VERSION_CURRENT"
      init: $X_DEVICE_COMPUTE_PROPERTIES_VERSION_CURRENT
    - type: uint32_t
      name: maxTotalGroupSize
      desc: "[out] Maximum items per compute group. (maxGroupSizeX * maxGroupSizeY * maxGroupSizeZ) <= maxTotalGroupSize"
    - type: uint32_t
      name: maxGroupSizeX
      desc: "[out] Maximum items for X dimension in group"
    - type: uint32_t
      name: maxGroupSizeY
      desc: "[out] Maximum items for Y dimension in group"
    - type: uint32_t
      name: maxGroupSizeZ
      desc: "[out] Maximum items for Z dimension in group"
    - type: uint32_t
      name: maxGroupCountX
      desc: "[out] Maximum groups that can be launched for x dimension"
    - type: uint32_t
      name: maxGroupCountY
      desc: "[out] Maximum groups that can be launched for y dimension"
    - type: uint32_t
      name: maxGroupCountZ
      desc: "[out] Maximum groups that can be launched for z dimension"
    - type: uint32_t
      name: maxSharedLocalMemory
      desc: "[out] Maximum shared local memory per group."
    - type: uint32_t
      name: numSubGroupSizes
      desc: "[out] Number of subgroup sizes supported. This indicates number of entries in subGroupSizes."
    - type: uint32_t
      name: "subGroupSizes[$X_SUBGROUPSIZE_COUNT]"
      desc: "[out] Size group sizes supported."
--- #--------------------------------------------------------------------------
type: function
desc: "Retrieves compute attributes of the device"
class: $xDevice
name: GetComputeProperties
ordinal: "1"
analogue:
    - "**cuDeviceGetAttribute**"
    - clGetDeviceInfo
details:
    - "The application may call this function from simultaneous threads."
    - "The implementation of this function should be lock-free."
params:
    - type: $x_device_handle_t
      name: hDevice
      desc: "[in] handle of the device object"
    - type: "$x_device_compute_properties_t*"
      name: pComputeProperties
      desc: "[out] query result for compute properties"
--- #--------------------------------------------------------------------------
type: enum
desc: "API version of $x_device_memory_properties_t"
class: $xDevice
name: $x_device_memory_properties_version_t
etors:
    - name: $X_DEVICE_MEMORY_PROPERTIES_VERSION_CURRENT
      value: "$X_MAKE_VERSION( 1, 0 )"
      desc: "version 1.0"
--- #--------------------------------------------------------------------------
type: enum
desc: "Memory access capabilities"
class: $xDevice
name: $x_memory_access_capabilities_t
details:
    - "Supported access capabilities for different types of memory allocations"
etors:
    - name: $X_MEMORY_ACCESS
      value: "$X_BIT( 0 )"
      desc: "Supports load/store access"
    - name: $X_MEMORY_ATOMIC_ACCESS
      value: "$X_BIT( 1 )"
      desc: "Supports atomic access"
    - name: $X_MEMORY_CONCURRENT_ACCESS
      value: "$X_BIT( 2 )"
      desc: "Supports concurrent access"
    - name: $X_MEMORY_CONCURRENT_ATOMIC_ACCESS
      value: "$X_BIT( 3 )"
      desc: "Supports concurrent atomic access"
--- #--------------------------------------------------------------------------
type: struct
desc: "Device memory properties queried using $xDeviceGetMemoryProperties"
class: $xDevice
name: $x_device_memory_properties_t
members:
    - type: $x_device_memory_properties_version_t
      name: version
      desc: "[in] $X_DEVICE_MEMORY_PROPERTIES_VERSION_CURRENT"
      init: $X_DEVICE_MEMORY_PROPERTIES_VERSION_CURRENT
    - type: $x_bool_t
      name: unifiedMemory
      desc: "[out] Host and device share same physical memory."
    - type: $x_bool_t
      name: onDemandPageFaults
      desc: "[out] Device supports on-demand page-faulting."
    - type: uint32_t
      name: maxImageDims1D
      desc: "[out] Maximum image dimensions for 1D resources."
    - type: uint32_t
      name: maxImageDims2D
      desc: "[out] Maximum image dimensions for 2D resources."
    - type: uint32_t
      name: maxImageDims3D
      desc: "[out] Maximum image dimensions for 3D resources."
    - type: uint32_t
      name: maxImageArraySlices
      desc: "[out] Maximum image array slices"
    - type: $x_memory_access_capabilities_t
      name: hostAllocCapabilities
      desc: "[out] Bitfield describing host memory capabilities"
    - type: $x_memory_access_capabilities_t
      name: deviceAllocCapabilities
      desc: "[out] Bitfield describing device memory capabilities"
    - type: $x_memory_access_capabilities_t
      name: sharedSingleDeviceAllocCapabilities
      desc: "[out] Bitfield describing shared (single-device) memory capabilities"
    - type: $x_memory_access_capabilities_t
      name: sharedCrossDeviceAllocCapabilities
      desc: "[out] Bitfield describing shared (cross-device) memory capabilities"
    - type: $x_memory_access_capabilities_t
      name: sharedSystemDeviceAllocCapabilities
      desc: "[out] Bitfield describing shared (system) memory capabilities"
    - type: uint32_t
      name: intermediateCacheSize
      desc: "[out] Per-cache Intermediate Cache (L1/L2) size, in bytes"
    - type: $x_bool_t
      name: intermediateCacheControl
      desc: "[out] Support User control on Intermediate Cache (i.e. Resize SLM section vs Generic Cache)"
    - type: uint32_t
      name: lastLevelCacheSize
      desc: "[out] Per-cache Last Level Cache (L3) size, in bytes"
    - type: $x_bool_t
      name: lastLevelCacheSizeControl
      desc: "[out] Support User control on Last Level Cache (i.e. Resize SLM section vs Generic Cache)."
--- #--------------------------------------------------------------------------
type: function
desc: "Retrieves memory attributes of the device"
class: $xDevice
name: GetMemoryProperties
ordinal: "1"
analogue:
    - "**cuDeviceGetAttribute**"
    - cuDeviceTotalMem
    - clGetDeviceInfo
details:
    - "The application may call this function from simultaneous threads."
    - "The implementation of this function should be lock-free."
params:
    - type: $x_device_handle_t
      name: hDevice
      desc: "[in] handle of the device object"
    - type: "$x_device_memory_properties_t*"
      name: pMemProperties
      desc: "[out] query result for compute properties"
--- #--------------------------------------------------------------------------
type: enum
desc: "API version of $x_device_p2p_properties_t"
class: $xDevice
name: $x_device_p2p_properties_version_t
etors:
    - name: $X_DEVICE_P2P_PROPERTIES_VERSION_CURRENT
      value: "$X_MAKE_VERSION( 1, 0 )"
      desc: "version 1.0"
--- #--------------------------------------------------------------------------
type: struct
desc: "Device properties queried using $xDeviceGetP2PProperties"
class: $xDevice
name: $x_device_p2p_properties_t
members:
    - type: $x_device_p2p_properties_version_t
      name: version
      desc: "[in] $X_DEVICE_P2P_PROPERTIES_VERSION_CURRENT"
      init: $X_DEVICE_P2P_PROPERTIES_VERSION_CURRENT
    - type: $x_bool_t
      name: isP2PSupported
      desc: "[out] Is P2P access supported between two devices"
    - type: $x_bool_t
      name: isAtomicsSupported
      desc: "[out] Are atomics supported between two devices"
 
--- #--------------------------------------------------------------------------
type: function
desc: "Retrieves Peer-to-Peer properties between one device and a peer devices"
class: $xDevice
name: GetP2PProperties
ordinal: "1"
analogue:
    - "**cudaDeviceGetP2PAttribute**"
details:
    - "The application may call this function from simultaneous threads."
    - "The implementation of this function should be lock-free."
params:
    - type: "$x_device_handle_t"
      name: hDevice
      desc: "[in] handle of the device performing the access"
    - type: "$x_device_handle_t"
      name: hPeerDevice
      desc: "[in] handle of the peer device with the allocation"
    - type: "$x_device_p2p_properties_t*"
      name: pP2PProperties
      desc: "[out] Peer-to-Peer properties between source and peer device"
--- #--------------------------------------------------------------------------
type: function
desc: "Queries if one device can directly access peer device allocations"
class: $xDevice
name: CanAccessPeer
ordinal: "2"
analogue:
    - "**cudaDeviceCanAccessPeer**"
details:
    - "The application may call this function from simultaneous threads."
    - "The implementation of this function should be lock-free."
params:
    - type: "$x_device_handle_t"
      name: hDevice
      desc: "[in] handle of the device performing the access"
    - type: "$x_device_handle_t"
      name: hPeerDevice
      desc: "[in] handle of the peer device with the allocation"
    - type: "$x_bool_t*"
      name: value
      desc: "[out] returned access capability"
--- #--------------------------------------------------------------------------
type: enum
desc: "Supported Cache Config"
class: $xDevice
name: $x_cache_config_t
details:
    - "Supported Cache Config (Default, Large SLM, Large Data Cache)"
etors:
    - name: $X_CACHE_CONFIG_DEFAULT
      value: "$X_BIT( 0 )"
      desc: "Default Config"
    - name: $X_CACHE_CONFIG_LARGE_SLM
      value: "$X_BIT( 1 )"
      desc: "Large SLM size"
    - name: $X_CACHE_CONFIG_LARGE_DATA
      value: "$X_BIT( 2 )"
      desc: "Large General Data size"
--- #--------------------------------------------------------------------------
type: function
desc: "Sets the preferred Intermediate cache configuration for a device."
class: $xDevice
name: SetIntermediateCacheConfig
ordinal: "2"
details:
    - "The application may **not** call this function from simultaneous threads with the same device handle."
analogue:
    - "**cudaFuncSetCacheConfig **"
params:
    - type: "$x_device_handle_t"
      name: hDevice
      desc: "[in] handle of the device "
    - type: "$x_cache_config_t"
      name: CacheConfig
      desc: "[in] CacheConfig"
returns:
    - $X_RESULT_ERROR_INVALID_PARAMETER:
        - "devices do not support CacheConfig"
--- #--------------------------------------------------------------------------
type: function
desc: "Sets the preferred Last Level cache configuration for a device."
class: $xDevice
name: SetLastLevelCacheConfig
ordinal: "2"
details:
    - "The application may **not** call this function from simultaneous threads with the same device handle."
analogue:
    - "**cudaFuncSetCacheConfig **"
params:
    - type: "$x_device_handle_t"
      name: hDevice
      desc: "[in] handle of the device "
    - type: "$x_cache_config_t"
      name: CacheConfig
      desc: "[in] CacheConfig"
returns:
    - $X_RESULT_ERROR_INVALID_PARAMETER:
        - "devices do not support CacheConfig"
--- #--------------------------------------------------------------------------
type: class
desc: "C++ wrapper for device"
name: $xDevice
members:
    - type: $x_device_handle_t
      name: handle
      desc: "handle of device object"
      init: nullptr
    - type: $xDriver*
      name: pDriver
      desc: "[in] pointer to parent object"
